import{g as p}from"./storage-15de54d1.js";function d(t,s=!1){i();const e=document.createElement("div");e.id="context-escape-hatch-overlay",e.style.position="fixed",e.style.top="20px",e.style.right="20px",e.style.backgroundColor="white",e.style.borderLeft=s?"3px solid #ea4335":"3px solid #4285f4",e.style.boxShadow="0 2px 10px rgba(0, 0, 0, 0.1)",e.style.padding="12px",e.style.width="280px",e.style.maxWidth="280px",e.style.zIndex="9999999",e.style.borderRadius="4px",e.style.boxSizing="border-box",e.style.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif';const y=document.createElement("style");y.textContent=`
    @keyframes slideIn {
      from { transform: translateX(20px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
  `,document.head.appendChild(y),e.style.animation="slideIn 0.3s ease-out";const l=document.createElement("h3");l.textContent=s?"No intent saved:":"Your saved intent:",l.style.fontSize="14px",l.style.color=s?"#ea4335":"#4285f4",l.style.marginBottom="6px",l.style.fontWeight="500",l.style.margin="0 0 6px 0",e.appendChild(l);const r=document.createElement("p");r.textContent=s?"Add your intention for this page to stay focused.":t,r.style.fontSize="14px",r.style.margin="0 0 10px 0",r.style.color="#333",r.style.fontWeight=s?"400":"500",r.style.wordBreak="break-word",e.appendChild(r);const a=document.createElement("div");a.style.display="flex",a.style.justifyContent="flex-start",a.style.gap="8px";const o=document.createElement("button");if(s?(o.textContent="Add Intent",o.style.backgroundColor="#ea4335",o.style.color="white",o.onclick=()=>{i(),chrome.runtime.sendMessage({type:"OPEN_POPUP"})}):(o.textContent="Dismiss",o.style.backgroundColor="#f1f3f4",o.style.color="#333",o.onclick=i),o.style.border="none",o.style.padding="6px 12px",o.style.borderRadius="4px",o.style.cursor="pointer",o.style.fontSize="12px",a.appendChild(o),s){const n=document.createElement("button");n.textContent="Dismiss",n.style.backgroundColor="#f1f3f4",n.style.border="none",n.style.padding="6px 12px",n.style.borderRadius="4px",n.style.cursor="pointer",n.style.fontSize="12px",n.style.color="#333",n.onclick=i,a.appendChild(n)}e.appendChild(a),document.body.appendChild(e),setTimeout(i,1e4)}function i(){const t=document.getElementById("context-escape-hatch-overlay");t&&t.remove()}chrome.runtime.onMessage.addListener(t=>{t.type==="SHOW_NOTE_OVERLAY"&&t.note?d(t.note):t.type==="SHOW_INTENT_PROMPT"&&d("",!0)});async function c(){try{if(window.location.href.startsWith("chrome://")||window.location.href.startsWith("edge://")||window.location.href.startsWith("chrome-extension://")||window.location.href.startsWith("about:"))return;console.log("Checking for notes at URL:",window.location.href);const t=await p(window.location.href);t?(console.log("Found note, displaying overlay"),d(t.note)):(console.log("No note found, displaying reminder"),d("",!0))}catch(t){console.error("Error checking for notes:",t)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{setTimeout(c,1e3)}):setTimeout(c,1e3);window.addEventListener("load",()=>{setTimeout(c,2e3)});
