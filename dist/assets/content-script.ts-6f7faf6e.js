import{g as a}from"./storage-15de54d1.js";function c(o,s=!1){i();const t=document.createElement("div");t.id="context-escape-hatch-overlay",t.style.position="fixed",t.style.top="20px",t.style.right="20px",t.style.backgroundColor="white",t.style.borderLeft=s?"3px solid #ea4335":"3px solid #4285f4",t.style.boxShadow="0 2px 10px rgba(0, 0, 0, 0.1)",t.style.padding="12px",t.style.maxWidth="300px",t.style.zIndex="9999",t.style.borderRadius="4px",t.style.animation="slideIn 0.3s ease-out";const l=document.createElement("h3");l.textContent=s?"No intent saved:":"Your saved intent:",l.style.fontSize="14px",l.style.color=s?"#ea4335":"#4285f4",l.style.marginBottom="6px",l.style.fontWeight="500",t.appendChild(l);const r=document.createElement("p");r.textContent=s?"Add your intention for this page to stay focused.":o,r.style.fontSize="14px",r.style.margin="0 0 10px 0",r.style.color="#333",r.style.fontWeight=s?"400":"500",t.appendChild(r);const e=document.createElement("button");if(s?(e.textContent="Add Intent",e.style.backgroundColor="#ea4335",e.style.color="white",e.onclick=()=>{i(),chrome.runtime.sendMessage({type:"OPEN_POPUP"})}):(e.textContent="Dismiss",e.style.backgroundColor="#f1f3f4",e.style.color="#333",e.onclick=i),e.style.border="none",e.style.padding="6px 12px",e.style.borderRadius="4px",e.style.cursor="pointer",e.style.fontSize="12px",e.style.marginRight="8px",t.appendChild(e),s){const n=document.createElement("button");n.textContent="Dismiss",n.style.backgroundColor="#f1f3f4",n.style.border="none",n.style.padding="6px 12px",n.style.borderRadius="4px",n.style.cursor="pointer",n.style.fontSize="12px",n.style.color="#333",n.onclick=i,t.appendChild(n)}document.body.appendChild(t),setTimeout(i,1e4)}function i(){const o=document.getElementById("context-escape-hatch-overlay");o&&o.remove()}chrome.runtime.onMessage.addListener(o=>{o.type==="SHOW_NOTE_OVERLAY"&&o.note?c(o.note):o.type==="SHOW_INTENT_PROMPT"&&c("",!0)});async function d(){try{if(window.location.href.startsWith("chrome://")||window.location.href.startsWith("edge://"))return;const o=await a(window.location.href);o?c(o.note):c("",!0)}catch(o){console.error("Error checking for notes:",o)}}setTimeout(d,2e3);
