import{g as y}from"./storage-15de54d1.js";function c(e,s=!1){i();const t=document.createElement("div");t.id="context-escape-hatch-overlay",t.style.position="fixed",t.style.top="20px",t.style.right="20px",t.style.backgroundColor="white",t.style.borderLeft=s?"3px solid #ea4335":"3px solid #4285f4",t.style.boxShadow="0 2px 10px rgba(0, 0, 0, 0.1)",t.style.padding="12px",t.style.width="280px",t.style.maxWidth="280px",t.style.zIndex="9999999",t.style.borderRadius="4px",t.style.boxSizing="border-box",t.style.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif';const d=document.createElement("style");d.textContent=`
    @keyframes slideIn {
      from { transform: translateX(20px); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }
  `,document.head.appendChild(d),t.style.animation="slideIn 0.3s ease-out";const l=document.createElement("h3");l.textContent=s?"No intent saved:":"Your saved intent:",l.style.fontSize="14px",l.style.color=s?"#ea4335":"#4285f4",l.style.marginBottom="6px",l.style.fontWeight="500",l.style.margin="0 0 6px 0",t.appendChild(l);const r=document.createElement("p");r.textContent=s?"Add your intention for this page to stay focused.":e,r.style.fontSize="14px",r.style.margin="0 0 10px 0",r.style.color="#333",r.style.fontWeight=s?"400":"500",r.style.wordBreak="break-word",t.appendChild(r);const a=document.createElement("div");a.style.display="flex",a.style.justifyContent="flex-start",a.style.gap="8px";const o=document.createElement("button");if(s?(o.textContent="Add Intent",o.style.backgroundColor="#ea4335",o.style.color="white",o.onclick=()=>{i(),chrome.runtime.sendMessage({type:"OPEN_POPUP"})}):(o.textContent="Dismiss",o.style.backgroundColor="#f1f3f4",o.style.color="#333",o.onclick=i),o.style.border="none",o.style.padding="6px 12px",o.style.borderRadius="4px",o.style.cursor="pointer",o.style.fontSize="12px",a.appendChild(o),s){const n=document.createElement("button");n.textContent="Dismiss",n.style.backgroundColor="#f1f3f4",n.style.border="none",n.style.padding="6px 12px",n.style.borderRadius="4px",n.style.cursor="pointer",n.style.fontSize="12px",n.style.color="#333",n.onclick=i,a.appendChild(n)}t.appendChild(a),document.body.appendChild(t),setTimeout(i,1e4)}function i(){const e=document.getElementById("context-escape-hatch-overlay");e&&e.remove()}chrome.runtime.onMessage.addListener(e=>{e.type==="SHOW_NOTE_OVERLAY"&&e.note?c(e.note):e.type==="SHOW_INTENT_PROMPT"&&c("",!0)});async function p(){try{if(window.location.href.startsWith("chrome://")||window.location.href.startsWith("edge://"))return;const e=await y(window.location.href);e?c(e.note):c("",!0)}catch(e){console.error("Error checking for notes:",e)}}setTimeout(p,2e3);
