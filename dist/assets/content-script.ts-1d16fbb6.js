import{g as u}from"./storage-15de54d1.js";let d=!1;function c(t,l=!1){if(d||document.getElementById("context-escape-hatch-overlay"))return;const e=document.createElement("div");e.id="context-escape-hatch-overlay",e.style.position="fixed",e.style.top="20px",e.style.right="20px",e.style.backgroundColor="white",e.style.borderLeft=l?"2px solid #f4cccc":"2px solid #d2e3fc",e.style.boxShadow="0 1px 8px rgba(0, 0, 0, 0.08)",e.style.padding="12px",e.style.width="240px",e.style.maxWidth="240px",e.style.zIndex="9999999",e.style.borderRadius="4px",e.style.boxSizing="border-box",e.style.opacity="0.95",e.style.fontFamily='-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif';const p=document.createElement("style");p.textContent=`
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
  `,document.head.appendChild(p),e.style.animation="fadeIn 0.2s ease-out";const s=document.createElement("h3");s.textContent=l?"No intent saved:":"Your saved intent:",s.style.fontSize="14px",s.style.color=l?"#ea4335":"#4285f4",s.style.marginBottom="6px",s.style.fontWeight="500",s.style.margin="0 0 6px 0",e.appendChild(s);const r=document.createElement("p");r.textContent=l?"Add your intention for this page to stay focused.":t,r.style.fontSize="14px",r.style.margin="0 0 10px 0",r.style.color="#333",r.style.fontWeight=l?"400":"500",r.style.wordBreak="break-word",e.appendChild(r);const a=document.createElement("div");a.style.display="flex",a.style.justifyContent="flex-start",a.style.gap="8px";const o=document.createElement("button");if(l?(o.textContent="Add Intent",o.style.backgroundColor="#ea4335",o.style.color="white",o.onclick=()=>{i(),chrome.runtime.sendMessage({type:"OPEN_POPUP"})}):(o.textContent="Dismiss",o.style.backgroundColor="#f1f3f4",o.style.color="#333",o.onclick=i),o.style.border="none",o.style.padding="6px 12px",o.style.borderRadius="4px",o.style.cursor="pointer",o.style.fontSize="12px",a.appendChild(o),l){const n=document.createElement("button");n.textContent="Dismiss",n.style.backgroundColor="#f1f3f4",n.style.border="none",n.style.padding="6px 12px",n.style.borderRadius="4px",n.style.cursor="pointer",n.style.fontSize="12px",n.style.color="#333",n.onclick=i,a.appendChild(n)}e.appendChild(a),document.body.appendChild(e),d=!0,setTimeout(i,6e3)}function i(){const t=document.getElementById("context-escape-hatch-overlay");t&&t.remove()}chrome.runtime.onMessage.addListener(t=>{d||document.getElementById("context-escape-hatch-overlay")||(t.type==="SHOW_NOTE_OVERLAY"&&t.note?c(t.note):t.type==="SHOW_INTENT_PROMPT"&&c("",!0))});async function y(){try{if(window.location.href.startsWith("chrome://")||window.location.href.startsWith("edge://")||window.location.href.startsWith("chrome-extension://")||window.location.href.startsWith("about:"))return;console.log("Checking for notes at URL:",window.location.href);const t=await u(window.location.href);t?(console.log("Found note, displaying overlay"),c(t.note)):(console.log("No note found, displaying reminder"),c("",!0))}catch(t){console.error("Error checking for notes:",t)}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{setTimeout(y,1e3)},{once:!0}):setTimeout(y,1e3);window.addEventListener("load",()=>{setTimeout(y,2e3)},{once:!0});
